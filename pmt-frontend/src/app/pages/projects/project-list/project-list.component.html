<div class="max-w-6xl mx-auto">
  <h1 class="text-2xl font-semibold mb-4">Projets</h1>

  <div *ngIf="loading" class="mb-3 text-gray-600">Chargement…</div>
  <div *ngIf="error" class="mb-3 text-red-700 bg-red-50 border border-red-200 p-2 rounded">{{ error }}</div>

  <table class="w-full border-collapse border" *ngIf="!loading && projects.length">
    <thead class="bg-gray-100">
      <tr>
        <th class="border p-2 text-left">ID</th>
        <th class="border p-2 text-left">Nom</th>
        <th class="border p-2 text-left">Description</th>
        <th class="border p-2 text-left">Début</th>
        <th class="border p-2 text-left">Owner</th>
        <th class="border p-2 text-left">Créé le</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of projects; trackBy: trackById">
        <td class="border p-2">{{ p.id }}</td>
        <td class="border p-2">{{ p.name }}</td>
        <td class="border p-2">{{ p.description }}</td>
        <td class="border p-2">
          <!-- p.startDate peut arriver en 'YYYY-MM-DD' : on l'affiche tel quel -->
          {{ p.startDate || '' }}
        </td>
        <td class="border p-2">{{ p.ownerId }}</td>
        <td class="border p-2">
          <!-- p.createdAt peut être ISO ou localDateTime : on tronque proprement -->
          {{ (p.createdAt || '').toString().replace('T', ' ').slice(0, 19) }}
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!loading && !projects.length" class="text-gray-600">
    Aucun projet pour le moment.
  </div>
</div>
